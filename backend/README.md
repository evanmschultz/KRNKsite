# KRNKsite Backend

This repository contains the backend for the KRNKsite project, built with FastAPI.

## Table of Contents

-   [KRNKsite Backend](#krnksite-backend)
    -   [Table of Contents](#table-of-contents)
    -   [Prerequisites](#prerequisites)
    -   [Installation](#installation)
    -   [Environment Variables](#environment-variables)
        -   [Database](#database)
        -   [OpenAI](#openai)
    -   [Database Setup](#database-setup)
    -   [Running the Application](#running-the-application)

## Prerequisites

-   Python 3.11+
-   [Poetry](https://python-poetry.org/)

If you don't have Poetry installed, you can install it by following the instructions on the [Poetry Quickstart page](https://python-poetry.org/docs/).

## Installation

1. Navigate to the project directory:

    ```bash
    cd backend
    ```

1. Install the dependencies using Poetry:

    ```bash
    poetry install
    ```

## Environment Variables

### Database

Before running the application, you'll need to set up some environment variables based on your MySQL setup. You can do this by exporting them in your terminal, note, these are not needed if your MySQL setup is the same as the defaults:

```bash
export DB_USER=<your_database_user> # defaults to root
export DB_PASSWORD=<your_database_password> # defaults to empty 'rootroot'
export DB_HOST=<your_database_host> # defaults to localhost
```

### OpenAI

The application uses OpenAI's API to generate the summaries of the Arxiv papers. To use this, you'll need to set up an OpenAI API key, you can export it in your terminal:

```bash
export OPENAI_API_KEY=<your_openai_api_key>
```

## Database Setup

The application uses MySQL for the database. The config/database.py file contains a function that ensures the database is created if it doesn't already exist.

## Running the Application

To run the application, use the following command:

```bash
poetry run uvicorn main:app --reload
```

This will start the FastAPI application on http://127.0.0.1:8000.

The --reload option means that the server will automatically restart if any code changes are detected, which is useful during development.

Documentation is autogenerated by FastAPI and can be found at http://127.0.0.1:8000/docs after running the app.

That's it! You should now have the KRNKsite backend running locally.
